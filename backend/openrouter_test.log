2025-08-22 02:23:28,255 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:23:28,265 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:23:28,271 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:23:32,193 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 298, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 250, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:23:36,331 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 298, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 250, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:23:40,969 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 298, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 250, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:23:41,003 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:23:41,003 - __main__ - ERROR - Test Basic Text Generation - String Prompt failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 298, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 250, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 77, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 141, in test_basic_text_generation
    response = await self.client.generate("What is 2+2? Answer briefly.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 357, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:23:44,573 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 298, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 250, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:25:08,613 - __main__ - INFO - 🚀 Starting OpenRouter Client Test Suite
2025-08-22 02:25:08,613 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:25:08,614 - __main__ - INFO - ✅ PASS Client Initialization - Default (0.00s)
2025-08-22 02:25:08,614 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:25:08,615 - __main__ - INFO - ✅ PASS Client Initialization - Custom Model (0.00s)
2025-08-22 02:25:08,615 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:25:08,615 - __main__ - INFO - ✅ PASS Client Initialization - Custom Keys (0.00s)
2025-08-22 02:25:08,616 - __main__ - INFO - ✅ PASS Environment Key Loading (0.00s)
2025-08-22 02:25:12,312 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:25:16,402 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:25:21,178 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:25:21,186 - __main__ - INFO - ❌ FAIL Basic Text Generation - String Prompt (12.57s)
2025-08-22 02:25:21,187 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:25:21,187 - __main__ - ERROR - Test Basic Text Generation - String Prompt failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 154, in test_basic_text_generation
    response = await self.client.generate("What is 2+2? Answer briefly.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:25:24,794 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:25:28,981 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\http_proxy.py", line 288, in handle_async_request
    connect_response = await self._connection.handle_async_request(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        connect_request
        ^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:27:18,040 - __main__ - INFO - 🚀 Starting OpenRouter Client Test Suite
2025-08-22 02:27:18,041 - __main__ - INFO - ❌ FAIL Client Initialization - Default (0.00s)
2025-08-22 02:27:18,042 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,042 - __main__ - ERROR - Test Client Initialization - Default failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 102, in test_client_initialization
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,045 - __main__ - INFO - ❌ FAIL Client Initialization - Custom Model (0.00s)
2025-08-22 02:27:18,045 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,046 - __main__ - ERROR - Test Client Initialization - Custom Model failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 106, in test_client_initialization
    client = OpenRouterClient(model="anthropic/claude-3-haiku")
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,047 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:27:18,047 - __main__ - INFO - ✅ PASS Client Initialization - Custom Keys (0.00s)
2025-08-22 02:27:18,048 - __main__ - INFO - ✅ PASS Environment Key Loading (0.00s)
2025-08-22 02:27:18,048 - __main__ - ERROR - Test function test_basic_text_generation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 151, in test_basic_text_generation
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,050 - __main__ - INFO - ❌ FAIL test_basic_text_generation (0.00s)
2025-08-22 02:27:18,050 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,051 - __main__ - ERROR - Test function test_message_format_generation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 171, in test_message_format_generation
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,052 - __main__ - INFO - ❌ FAIL test_message_format_generation (0.00s)
2025-08-22 02:27:18,052 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,053 - __main__ - ERROR - Test function test_generation_parameters crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 187, in test_generation_parameters
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,054 - __main__ - INFO - ❌ FAIL test_generation_parameters (0.00s)
2025-08-22 02:27:18,054 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,054 - __main__ - ERROR - Test function test_model_selection crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 213, in test_model_selection
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,056 - __main__ - INFO - ❌ FAIL test_model_selection (0.00s)
2025-08-22 02:27:18,056 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,056 - __main__ - ERROR - Test function test_key_rotation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 241, in test_key_rotation
    if len(self.client.keys) < 2:
AttributeError: 'NoneType' object has no attribute 'keys'
2025-08-22 02:27:18,057 - __main__ - INFO - ❌ FAIL test_key_rotation (0.00s)
2025-08-22 02:27:18,057 - __main__ - ERROR - Error: Test crashed: 'NoneType' object has no attribute 'keys'
2025-08-22 02:27:18,058 - openrouter_client - INFO - Initialized OpenRouter client with 1 keys
2025-08-22 02:27:18,107 - openrouter_client - ERROR - Request failed with key invalid-
Traceback (most recent call last):
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_transports\default.py", line 66, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_transports\default.py", line 366, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1848, in post
    return await self.request(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1530, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1617, in send
    response = await self._send_handling_auth(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1645, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1682, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_client.py", line 1719, in _send_single_request
    response = await transport.handle_async_request(request)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_transports\default.py", line 365, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\PC\AppData\Local\Programs\Python\Python310\lib\site-packages\httpx\_transports\default.py", line 83, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:27:18,632 - __main__ - INFO - ✅ PASS Error Handling - Invalid Key (0.57s)
2025-08-22 02:27:18,646 - __main__ - INFO - ❌ FAIL Error Handling - Invalid Model (0.00s)
2025-08-22 02:27:18,646 - __main__ - ERROR - Error: AttributeError: 'NoneType' object has no attribute 'generate'
2025-08-22 02:27:18,647 - __main__ - ERROR - Test Error Handling - Invalid Model failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 277, in test_error_handling
    await self.client.generate(GenerationRequest(
AttributeError: 'NoneType' object has no attribute 'generate'
2025-08-22 02:27:18,649 - __main__ - ERROR - Test function test_key_status_monitoring crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 289, in test_key_status_monitoring
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,650 - __main__ - INFO - ❌ FAIL test_key_status_monitoring (0.00s)
2025-08-22 02:27:18,651 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,651 - __main__ - INFO - ❌ FAIL Key Health Tracking (0.00s)
2025-08-22 02:27:18,651 - __main__ - ERROR - Error: AttributeError: 'NoneType' object has no attribute 'get_healthy_keys'
2025-08-22 02:27:18,652 - __main__ - ERROR - Test Key Health Tracking failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 314, in test_key_health_tracking
    healthy_keys = self.client.get_healthy_keys()
AttributeError: 'NoneType' object has no attribute 'get_healthy_keys'
2025-08-22 02:27:18,653 - __main__ - ERROR - Test function test_individual_key_testing crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 324, in test_individual_key_testing
    if not self.client.keys:
AttributeError: 'NoneType' object has no attribute 'keys'
2025-08-22 02:27:18,656 - __main__ - INFO - ❌ FAIL test_individual_key_testing (0.00s)
2025-08-22 02:27:18,656 - __main__ - ERROR - Error: Test crashed: 'NoneType' object has no attribute 'keys'
2025-08-22 02:27:18,657 - __main__ - ERROR - Test function test_model_listing crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 340, in test_model_listing
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,658 - __main__ - INFO - ❌ FAIL test_model_listing (0.00s)
2025-08-22 02:27:18,658 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,659 - __main__ - INFO - ❌ FAIL Convenience Functions - generate_text (0.00s)
2025-08-22 02:27:18,660 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,660 - __main__ - ERROR - Test Convenience Functions - generate_text failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 360, in test_convenience_functions
    result = await generate_text("What is 1+1? Answer with just the number.")
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 487, in generate_text
    async with OpenRouterClient(model=model, **kwargs) as client:
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,662 - __main__ - ERROR - Test function test_concurrent_requests crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 368, in test_concurrent_requests
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,667 - __main__ - INFO - ❌ FAIL test_concurrent_requests (0.00s)
2025-08-22 02:27:18,667 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:27:18,668 - __main__ - INFO - ❌ FAIL Context Manager (0.00s)
2025-08-22 02:27:18,668 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,669 - __main__ - ERROR - Test Context Manager failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 394, in test_context_manager
    async with OpenRouterClient() as client:
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,670 - __main__ - ERROR - Test function test_edge_cases crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 401, in test_edge_cases
    self.client = OpenRouterClient()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:27:18,673 - __main__ - INFO - ❌ FAIL test_edge_cases (0.00s)
2025-08-22 02:27:18,674 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:12,403 - __main__ - INFO - 🚀 Starting OpenRouter Client Test Suite
2025-08-22 02:34:12,404 - __main__ - INFO - ❌ FAIL Client Initialization - Default (0.00s)
2025-08-22 02:34:12,404 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,405 - __main__ - ERROR - Test Client Initialization - Default failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 102, in test_client_initialization
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,407 - __main__ - INFO - ❌ FAIL Client Initialization - Custom Model (0.00s)
2025-08-22 02:34:12,408 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,408 - __main__ - ERROR - Test Client Initialization - Custom Model failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 106, in test_client_initialization
    client = OpenRouterClient(model="anthropic/claude-3-haiku")
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,410 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:34:12,411 - __main__ - INFO - ✅ PASS Client Initialization - Custom Keys (0.00s)
2025-08-22 02:34:12,412 - __main__ - INFO - ✅ PASS Environment Key Loading (0.00s)
2025-08-22 02:34:12,412 - __main__ - ERROR - Test function test_basic_text_generation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 151, in test_basic_text_generation
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,414 - __main__ - INFO - ❌ FAIL test_basic_text_generation (0.00s)
2025-08-22 02:34:12,414 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:12,415 - __main__ - ERROR - Test function test_message_format_generation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 171, in test_message_format_generation
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,416 - __main__ - INFO - ❌ FAIL test_message_format_generation (0.00s)
2025-08-22 02:34:12,416 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:12,417 - __main__ - ERROR - Test function test_generation_parameters crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 187, in test_generation_parameters
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,418 - __main__ - INFO - ❌ FAIL test_generation_parameters (0.00s)
2025-08-22 02:34:12,419 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:12,419 - __main__ - ERROR - Test function test_model_selection crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 213, in test_model_selection
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:12,421 - __main__ - INFO - ❌ FAIL test_model_selection (0.00s)
2025-08-22 02:34:12,421 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:12,421 - __main__ - ERROR - Test function test_key_rotation crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 241, in test_key_rotation
    if len(self.client.keys) < 2:
           ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'keys'
2025-08-22 02:34:12,423 - __main__ - INFO - ❌ FAIL test_key_rotation (0.00s)
2025-08-22 02:34:12,423 - __main__ - ERROR - Error: Test crashed: 'NoneType' object has no attribute 'keys'
2025-08-22 02:34:12,423 - openrouter_client - INFO - Initialized OpenRouter client with 1 keys
2025-08-22 02:34:13,058 - openrouter_client - ERROR - Request failed with key invalid-
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:34:13,584 - __main__ - INFO - ✅ PASS Error Handling - Invalid Key (1.16s)
2025-08-22 02:34:13,584 - __main__ - INFO - ❌ FAIL Error Handling - Invalid Model (0.00s)
2025-08-22 02:34:13,585 - __main__ - ERROR - Error: AttributeError: 'NoneType' object has no attribute 'generate'
2025-08-22 02:34:13,585 - __main__ - ERROR - Test Error Handling - Invalid Model failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 277, in test_error_handling
    await self.client.generate(GenerationRequest(
          ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'generate'
2025-08-22 02:34:13,587 - __main__ - ERROR - Test function test_key_status_monitoring crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 289, in test_key_status_monitoring
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,588 - __main__ - INFO - ❌ FAIL test_key_status_monitoring (0.00s)
2025-08-22 02:34:13,589 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:13,589 - __main__ - INFO - ❌ FAIL Key Health Tracking (0.00s)
2025-08-22 02:34:13,589 - __main__ - ERROR - Error: AttributeError: 'NoneType' object has no attribute 'get_healthy_keys'
2025-08-22 02:34:13,590 - __main__ - ERROR - Test Key Health Tracking failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 314, in test_key_health_tracking
    healthy_keys = self.client.get_healthy_keys()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_healthy_keys'
2025-08-22 02:34:13,591 - __main__ - ERROR - Test function test_individual_key_testing crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 324, in test_individual_key_testing
    if not self.client.keys:
           ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'keys'
2025-08-22 02:34:13,592 - __main__ - INFO - ❌ FAIL test_individual_key_testing (0.00s)
2025-08-22 02:34:13,593 - __main__ - ERROR - Error: Test crashed: 'NoneType' object has no attribute 'keys'
2025-08-22 02:34:13,593 - __main__ - ERROR - Test function test_model_listing crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 340, in test_model_listing
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,596 - __main__ - INFO - ❌ FAIL test_model_listing (0.00s)
2025-08-22 02:34:13,596 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:13,597 - __main__ - INFO - ❌ FAIL Convenience Functions - generate_text (0.00s)
2025-08-22 02:34:13,598 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,598 - __main__ - ERROR - Test Convenience Functions - generate_text failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 360, in test_convenience_functions
    result = await generate_text("What is 1+1? Answer with just the number.")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 487, in generate_text
    async with OpenRouterClient(model=model, **kwargs) as client:
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,600 - __main__ - ERROR - Test function test_concurrent_requests crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 368, in test_concurrent_requests
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,602 - __main__ - INFO - ❌ FAIL test_concurrent_requests (0.00s)
2025-08-22 02:34:13,602 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:34:13,603 - __main__ - INFO - ❌ FAIL Context Manager (0.00s)
2025-08-22 02:34:13,603 - __main__ - ERROR - Error: OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,603 - __main__ - ERROR - Test Context Manager failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 90, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 394, in test_context_manager
    async with OpenRouterClient() as client:
               ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,605 - __main__ - ERROR - Test function test_edge_cases crashed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 445, in run_all_tests
    await test()
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 401, in test_edge_cases
    self.client = OpenRouterClient()
                  ~~~~~~~~~~~~~~~~^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 139, in __init__
    raise OpenRouterError("No OpenRouter API keys found")
openrouter_client.OpenRouterError: No OpenRouter API keys found
2025-08-22 02:34:13,607 - __main__ - INFO - ❌ FAIL test_edge_cases (0.00s)
2025-08-22 02:34:13,607 - __main__ - ERROR - Error: Test crashed: No OpenRouter API keys found
2025-08-22 02:35:06,638 - __main__ - INFO - 🚀 Starting OpenRouter Client Test Suite
2025-08-22 02:35:06,639 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:35:06,639 - __main__ - INFO - ✅ PASS Client Initialization - Default (0.00s)
2025-08-22 02:35:06,640 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:35:06,640 - __main__ - INFO - ✅ PASS Client Initialization - Custom Model (0.00s)
2025-08-22 02:35:06,640 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:35:06,640 - __main__ - INFO - ✅ PASS Client Initialization - Custom Keys (0.00s)
2025-08-22 02:35:06,641 - __main__ - INFO - ✅ PASS Environment Key Loading (0.00s)
2025-08-22 02:35:08,049 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:09,479 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:12,973 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:12,982 - __main__ - INFO - ❌ FAIL Basic Text Generation - String Prompt (6.34s)
2025-08-22 02:35:12,983 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:35:12,983 - __main__ - ERROR - Test Basic Text Generation - String Prompt failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 155, in test_basic_text_generation
    response = await self.client.generate("What is 2+2? Answer briefly.")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:35:13,562 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:14,891 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:16,425 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:16,435 - __main__ - INFO - ❌ FAIL Basic Text Generation - GenerationRequest (3.44s)
2025-08-22 02:35:16,435 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:35:16,436 - __main__ - ERROR - Test Basic Text Generation - GenerationRequest failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 165, in test_basic_text_generation
    response = await self.client.generate(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:35:16,987 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:20,152 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:23,745 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:23,753 - __main__ - INFO - ❌ FAIL Message Format Generation (7.30s)
2025-08-22 02:35:23,754 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:35:23,754 - __main__ - ERROR - Test Message Format Generation failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 182, in test_message_format_generation
    response = await self.client.generate(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:35:24,315 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:28,381 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:29,938 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:29,951 - __main__ - INFO - ❌ FAIL Generation Parameters - Temperature (6.19s)
2025-08-22 02:35:29,951 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:35:29,951 - __main__ - ERROR - Test Generation Parameters - Temperature failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 196, in test_generation_parameters
    response1 = await self.client.generate(request)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:35:30,506 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:31,701 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:35,689 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:35:35,699 - __main__ - INFO - ❌ FAIL Generation Parameters - Max Tokens (5.73s)
2025-08-22 02:35:35,700 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:35:35,700 - __main__ - ERROR - Test Generation Parameters - Max Tokens failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 207, in test_generation_parameters
    response = await self.client.generate(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 358, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:35:37,692 - openrouter_client - ERROR - Request failed with key sk-or-v1
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        pool_request.request
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 11001] getaddrinfo failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 299, in generate
    response = await self._make_request(key, payload, timeout)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 251, in _make_request
    response = await client.post(
               ^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1859, in post
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
    ...<13 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.13_3.13.2032.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\.venv\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 11001] getaddrinfo failed
2025-08-22 02:50:25,700 - __main__ - INFO - 🚀 Starting OpenRouter Client Test Suite
2025-08-22 02:50:25,701 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:50:25,701 - __main__ - INFO - ✅ PASS Client Initialization - Default (0.00s)
2025-08-22 02:50:25,702 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:50:25,702 - __main__ - INFO - ✅ PASS Client Initialization - Custom Model (0.00s)
2025-08-22 02:50:25,703 - openrouter_client - INFO - Initialized OpenRouter client with 2 keys
2025-08-22 02:50:25,703 - __main__ - INFO - ✅ PASS Client Initialization - Custom Keys (0.00s)
2025-08-22 02:50:25,703 - __main__ - INFO - ✅ PASS Environment Key Loading (0.00s)
2025-08-22 02:50:34,759 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:50:35,080 - __main__ - INFO - ✅ PASS Basic Text Generation - String Prompt (9.38s)
2025-08-22 02:50:41,125 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:50:41,355 - __main__ - INFO - ✅ PASS Basic Text Generation - GenerationRequest (6.27s)
2025-08-22 02:50:47,168 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:50:47,404 - __main__ - INFO - ✅ PASS Message Format Generation (6.05s)
2025-08-22 02:50:53,952 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:50:58,097 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:50:58,246 - __main__ - INFO - ✅ PASS Generation Parameters - Temperature (10.84s)
2025-08-22 02:51:03,208 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:03,293 - __main__ - INFO - ✅ PASS Generation Parameters - Max Tokens (5.05s)
2025-08-22 02:51:05,479 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:05,646 - __main__ - INFO - ✅ PASS Model Selection - anthropic/claude-3-haiku (2.35s)
2025-08-22 02:51:09,247 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:09,257 - __main__ - INFO - ✅ PASS Model Selection - openai/gpt-3.5-turbo (3.61s)
2025-08-22 02:51:11,901 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:11,902 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:13,191 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:13,196 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:15,699 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:15,701 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:15,701 - __main__ - INFO - ❌ FAIL Model Selection - meta-llama/llama-2-7b-chat (6.44s)
2025-08-22 02:51:15,701 - __main__ - ERROR - Error: OpenRouterError: All API keys failed after retries
2025-08-22 02:51:15,701 - __main__ - ERROR - Test Model Selection - meta-llama/llama-2-7b-chat failed
openrouter_client.OpenRouterError: OpenRouter API error 400: {"error":{"message":"meta-llama/llama-2-7b-chat is not a valid model ID","code":400},"user_id":"user_2zMgonjrgSUahI9vuIeFNHyPDRm"}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 231, in test_model_selection
    response = await self.client.generate(request)
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_client.py", line 370, in generate
    raise OpenRouterError("All API keys failed after retries") from last_exc
openrouter_client.OpenRouterError: All API keys failed after retries
2025-08-22 02:51:17,764 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:20,526 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:24,039 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:27,478 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:30,375 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:30,592 - __main__ - INFO - ❌ FAIL Key Rotation (14.88s)
2025-08-22 02:51:30,592 - __main__ - ERROR - Error: AssertionError: Only used 1 keys out of 11
2025-08-22 02:51:30,593 - __main__ - ERROR - Test Key Rotation failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 260, in test_key_rotation
    assert len(used_keys) > 1, f"Only used {len(used_keys)} keys out of {len(self.client.keys)}"
AssertionError: Only used 1 keys out of 11
2025-08-22 02:51:30,594 - openrouter_client - INFO - Initialized OpenRouter client with 1 keys
2025-08-22 02:51:30,866 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 401 Unauthorized"
2025-08-22 02:51:30,868 - openrouter_client - WARNING - Key invalid- failed with status 401
2025-08-22 02:51:30,868 - __main__ - INFO - ✅ PASS Error Handling - Invalid Key (0.27s)
2025-08-22 02:51:33,188 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:33,189 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:33,734 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:33,736 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:34,288 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-08-22 02:51:34,289 - openrouter_client - WARNING - Key sk-or-v1 failed with status 400
2025-08-22 02:51:34,290 - __main__ - INFO - ✅ PASS Error Handling - Invalid Model (3.42s)
2025-08-22 02:51:36,850 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:40,718 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:44,393 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:44,509 - __main__ - INFO - ❌ FAIL Key Status Monitoring (10.22s)
2025-08-22 02:51:44,509 - __main__ - ERROR - Error: AssertionError: 
2025-08-22 02:51:44,509 - __main__ - ERROR - Test Key Status Monitoring failed
Traceback (most recent call last):
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 91, in test_context
    yield
  File "C:\Users\PC\OneDrive\Desktop\python\whatsapp\agent\whats-app-agent\backend\openrouter_test_suite.py", line 302, in test_key_status_monitoring
    assert len(status) == len(self.client.keys)
AssertionError
2025-08-22 02:51:44,510 - __main__ - INFO - ✅ PASS Key Health Tracking (0.00s)
2025-08-22 02:51:47,353 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:47,506 - __main__ - INFO - ✅ PASS Individual Key Testing (2.99s)
2025-08-22 02:51:47,743 - httpx - INFO - HTTP Request: GET https://openrouter.ai/api/v1/models "HTTP/1.1 200 OK"
2025-08-22 02:51:48,023 - __main__ - INFO - ✅ PASS Model Listing (0.52s)
2025-08-22 02:51:48,024 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:51:50,231 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:50,389 - __main__ - INFO - ✅ PASS Convenience Functions - generate_text (2.37s)
2025-08-22 02:51:53,897 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:54,408 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:54,687 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:55,351 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:55,687 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:51:55,877 - __main__ - INFO - ✅ PASS Concurrent Requests (5.49s)
2025-08-22 02:51:55,878 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:52:00,428 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:00,602 - __main__ - INFO - ✅ PASS Context Manager (4.73s)
2025-08-22 02:52:00,603 - __main__ - INFO - ✅ PASS Edge Cases - Empty Prompt (0.00s)
2025-08-22 02:52:04,545 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:05,855 - __main__ - INFO - ✅ PASS Edge Cases - Very Long Prompt (5.25s)
2025-08-22 02:52:05,862 - openrouter_client - INFO - Initialized OpenRouter client with 11 keys
2025-08-22 02:52:09,052 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:11,847 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:15,730 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:19,806 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:23,526 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:29,510 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:32,605 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:35,421 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:39,762 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:43,163 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
2025-08-22 02:52:47,777 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"
